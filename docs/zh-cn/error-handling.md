# ⚠️ 错误处理

### API 错误

实现一个拦截器来更有效地管理错误。这个拦截器可以用于：触发错误通知 toast、登出未授权用户，或发送刷新 token 的请求，以维持安全且顺畅的应用体验。

[API 错误通知示例代码](../apps/react-vite/src/lib/api-client.ts)

### 应用内错误

使用 React 的 Error Boundary（错误边界）来处理应用特定区域内的错误。与其只给整个应用放置一个错误边界，不如在不同区域放置多个错误边界。这样一旦发生错误，就能将其限制在局部范围内进行处理，不至于破坏整个应用的可用性，从而提升用户体验。

[错误边界示例代码](../apps/react-vite/src/app/routes/app/discussions/discussion.tsx)

### 错误追踪

你应该追踪生产环境中发生的错误。虽然可以自建方案，但更推荐使用 [Sentry](https://sentry.io/) 之类的工具：它会自动上报导致应用崩溃/不可用的问题，并提供发生的平台、浏览器等信息。

同时请确保将 source map 上传到 Sentry，以便定位错误发生在源码的具体位置。
